import type { GetStaticProps, NextPage } from 'next';
import Head from 'next/head';
import { Container } from '../styles/uielement';
import Header from '../components/Header';
import client from '../graphql/apolloClient';
import { ANIME__LIST } from '../graphql/queries/query';
import { Anime } from '../models';
import ListCard from '../modules/ListCard';

const Home: NextPage<{ anime: Anime[] }> = ({ anime }) => {
  return (
    <div>
      <Head>
        <title>Anime List</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <Header />
      <Container>
        <ListCard animes={anime} />
      </Container>
    </div>
  );
};

export const getStaticProps: GetStaticProps = async () => {
  const { data } = await client.query({
    query: ANIME__LIST,
    variables: {
      page: 1,
      perPage: 10,
    },
  });
  return {
    props: {
      anime: data.Page.media,
    },
  };
};

export default Home;
